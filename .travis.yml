language: cpp
dist: xenial

os:
  - linux
  - osx

addons:
  apt:
    packages: 
      - gfortran
      - libblas-dev
      - liblapack-dev
  homebrew:
    packages: 
      - gfortran
    update: true

# install: make get-deps

compiler:
  - clang
  - gcc

# before_install:
#   - test -n $CC  && unset CC
#   - test -n $CXX && unset CXX

before_install:
  - export PATH=/usr/lib:/usr/local/lib:${PATH}
  - export LD_LIBRARY_PATH=/usr/lib:/usr/local/lib:${LD_LIBRARY_PATH}
  - export DYLD_LIBRARY_PATH=/usr/lib:/usr/local/lib:${DYLD_LIBRARY_PATH}
  - gfortran -v

install:
  - cmake . && make && make test
  